<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fetch Users with Search & Loader</title>

<!-- Bootstrap CSS CDN -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
  body { background: #eef3ff; 
  background: #211a31;}
  .user-card { transition: 0.3s; }
  .user-card:hover { transform: scale(1.03); }
  #loader {
    display: none;
    text-align: center;
    margin-top: 30px;
    font-size: 20px;
    font-weight: bold;
  }
</style>
</head>
<body class="container py-4">

<h1 class="text-center text-primary mb-4">Users List from Public API</h1>

<div class="d-flex justify-content-center mb-3">
  <input type="text" id="searchInput" class="form-control w-50" placeholder="üîç Search by Name..." onkeyup="filterUsers()">
</div>

<div class="d-flex justify-content-center mb-3">
  <button id="reloadBtn" class="btn btn-primary">üîÑ Reload Users</button>
</div>

<div id="loader">‚è≥ Loading users...</div>

<p id="error-message" class="text-danger text-center fw-bold"></p>

<div id="user-container" class="row g-3"></div>

<script>
  const apiURL = "https://jsonplaceholder.typicode.com/users";
  const container = document.getElementById("user-container");
  const loader = document.getElementById("loader");
  const searchInput = document.getElementById("searchInput");
  const errorMsg = document.getElementById("error-message");
  let usersData = [];

  async function fetchUsers() {
    container.innerHTML = "";
    searchInput.value = "";
    errorMsg.textContent = "";
    loader.style.display = "block";

    try {
      const response = await fetch(apiURL);
      if (!response.ok) throw new Error("Failed to fetch");

      usersData = await response.json();
      displayUsers(usersData);
    } catch (error) {
      errorMsg.textContent = "‚ùå Error fetching users! Check your internet connection.";
    } finally {
      loader.style.display = "none";
    }
  }

  function displayUsers(users) {
    container.innerHTML = "";

    users.forEach(user => {
      const card = document.createElement("div");
      card.className = "col-md-4";
      card.innerHTML = `
        <div class="card user-card shadow-sm p-3 h-100">
          <h4 class="text-primary">${user.name}</h4>
          <p><strong>Email:</strong> ${user.email}</p>
          <p><strong>City:</strong> ${user.address.city}</p>
        </div>
      `;
      container.appendChild(card);
    });

    if (users.length === 0) {
      container.innerHTML = `<p class="text-center text-muted">No users found.</p>`;
    }
  }

  function filterUsers() {
    const keyword = searchInput.value.toLowerCase();
    const filtered = usersData.filter(user => user.name.toLowerCase().includes(keyword));
    displayUsers(filtered);
  }

  document.getElementById("reloadBtn").addEventListener("click", fetchUsers);

  // Fetch users on first load
  fetchUsers();
</script>

</body>
</html>
